<!doctype html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<a href="{{ url_for('dashboard.index') }}">home</a>/<a
        href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name) }}">{{ clan_name }}</a>
{% block header %}
<h1>{{clan_name}} for {{selected_date}}</h1>
{% endblock %}

{% block content %}
<table class="fullTable" id="table">
    <thead>
    <tr>
        <th rowspan="2">Name<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='0', col_type='str', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='0', col_type='str', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
            <br>
            <input id="copyNames_btn" type="button" value="Copy"/>
        </th>
        <th rowspan="2">Score<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='1', col_type='int', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='1', col_type='int', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Previous Score<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='3', col_type='int', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='3', col_type='int', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">External Score<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='82', col_type='int', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='82', col_type='int', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Score Delta<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='2', col_type='int', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='2', col_type='int', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Days Last Played<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='4', col_type='int', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='4', col_type='int', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Date Last Played<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='5', col_type='date', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='5', col_type='date', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Inactive<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='10', col_type='date', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='10', col_type='date', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th rowspan="2">Clan Engram<br/>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='21', col_type='date', selected_date='%s'%selected_date ) }}"><font
                    size="2">▲</font></a>
            <a href="{{ url_for('dashboard.clan_view', clan_name='%s'%clan_name, sort_by='21', col_type='date', selected_date='%s'%selected_date, reverse='1' ) }}"><font
                    size="2">▼</font></a>
        </th>
        <th colspan="3">GOS</th>
        <th colspan="3">DSC</th>
        <th colspan="3">LW</th>
        <th colspan="3">Clan Engram By Class</th>
        <th colspan="3">Crucible Engram</th>
        <th colspan="3">Exo Challenge</th>
        <th colspan="3">Banshee</th>
        <th colspan="3">Drifter</th>
        <th colspan="3">Zavala</th>
        <th colspan="3">Variks</th>
        <th colspan="3">Exo Stranger</th>
        <th colspan="3">Empire Hunts</th>
        <th colspan="3">Nightfall</th>
        <th colspan="3">Deadly Venatics</th>
        <th colspan="3">Strikes</th>
        <th colspan="3">Nightfall 100k</th>
        <th colspan="3">Gambit</th>
        <th colspan="3">Crucible Playlist</th>
        <th colspan="3">Crucible Glory</th>
        <th colspan="3">Trials 3 wins</th>
        <th colspan="3">Trials 5 wins</th>
        <th colspan="3">Trials 7 wins</th>
        <th colspan="3">Low Light</th>
        <th rowspan="2">Account doesn't exist</th>
        <th rowspan="2">Private account</th>
    </tr>
    <tr>
        {%- for i in range(23) %}
        <th>H</th>
        <th>W</th>
        <th>T</th>
        {%- endfor -%}
    </tr>
    </thead>
    <tbody>
    {%- for i in range(members|length) -%}
    <tr>
        <th>{{ members[i][0] }}</th>  <!-- Name -->
        <td class="score"><b>{{ members[i][1] }}</b></td>  <!-- Score -->
        <td class="score">{{ members[i][3] }}</td>  <!-- Previous Score -->
        <td><input name="externalScore" type="text" value="{{ members[i][82] }}" onfocusout="addExternalScore()"></td>
        <!-- External Score -->
        <td>{{ members[i][2] }}</td>  <!-- Score Delta -->
        <td>{{ members[i][4] }}</td>  <!-- Days Last Played -->
        <td>{{ members[i][5][:10] }}</td>  <!-- Date Last Played -->
        <td>
            {%- if members[i][10] == 'True' -%}
            ✔️
            {%- endif -%}
        </td>  <!-- Inactive -->
        <td>
            {%- if members[i][20] == 'True' or members[i][21] == 'True' or members[i][22] == 'True' -%}
            ✔️
            {%- endif -%}
        </td>
        <td>{{ members[i][11] }}</td> <!-- GOS Hunter -->
        <td>{{ members[i][12] }}</td> <!-- GOS Warlock -->
        <td>{{ members[i][13] }}</td> <!-- GOS Titan -->
        <td>{{ members[i][14] }}</td> <!-- DSC Hunter -->
        <td>{{ members[i][15] }}</td> <!-- DSC Warlock -->
        <td>{{ members[i][16] }}</td> <!-- DSC Titan -->
        <td>{{ members[i][17] }}</td> <!-- LW Hunter -->
        <td>{{ members[i][18] }}</td> <!-- LW Warlock -->
        <td>{{ members[i][19] }}</td> <!-- LW Titan -->
        <td>{%- if members[i][20] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Clan Engram Hunter -->
        <td>{%- if members[i][21] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Clan Engram Warlock -->
        <td>{%- if members[i][22] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Clan Engram Titan -->
        <td>{%- if members[i][23] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Engram Hunter -->
        <td>{%- if members[i][24] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Engram Warlock -->
        <td>{%- if members[i][25] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Engram Titan -->
        <td>{%- if members[i][26] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Challenge Hunter -->
        <td>{%- if members[i][27] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Challenge Warlock -->
        <td>{%- if members[i][28] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Challenge Titan -->
        <td>{%- if members[i][29] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Banshee Hunter -->
        <td>{%- if members[i][30] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Banshee Warlock -->
        <td>{%- if members[i][31] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Banshee Titan -->
        <td>{%- if members[i][32] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Drifter Hunter -->
        <td>{%- if members[i][33] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Drifter Warlock -->
        <td>{%- if members[i][34] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Drifter Titan -->
        <td>{%- if members[i][35] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Zavala Hunter -->
        <td>{%- if members[i][36] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Zavala Warlock -->
        <td>{%- if members[i][37] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Zavala Titan -->
        <td>{%- if members[i][38] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Variks Hunter -->
        <td>{%- if members[i][39] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Variks Warlock -->
        <td>{%- if members[i][40] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Variks Titan -->
        <td>{%- if members[i][41] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Stranger Hunter -->
        <td>{%- if members[i][42] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Stranger Warlock -->
        <td>{%- if members[i][43] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Exo Stranger Titan -->
        <td>{%- if members[i][44] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Empire Hunt Hunter -->
        <td>{%- if members[i][45] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Empire Hunt Warlock -->
        <td>{%- if members[i][46] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Empire Hunt Titan -->
        <td>{%- if members[i][47] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall Hunter -->
        <td>{%- if members[i][48] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall Warlock -->
        <td>{%- if members[i][49] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall Titan -->
        <td>{%- if members[i][50] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Deadly Venatics Hunter -->
        <td>{%- if members[i][51] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Deadly Venatics Warlock -->
        <td>{%- if members[i][52] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Deadly Venatics Titan -->
        <td>{%- if members[i][53] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Strikes Hunter -->
        <td>{%- if members[i][54] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Strikes Warlock -->
        <td>{%- if members[i][55] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Strikes Titan -->
        <td>{%- if members[i][56] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall 100k Hunter -->
        <td>{%- if members[i][57] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall 100k Warlock -->
        <td>{%- if members[i][58] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Nightfall 100k Titan -->
        <td>{%- if members[i][59] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Gambit Hunter -->
        <td>{%- if members[i][60] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Gambit Warlock -->
        <td>{%- if members[i][61] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Gambit Titan -->
        <td>{%- if members[i][62] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Playlist Hunter -->
        <td>{%- if members[i][63] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Playlist Warlock -->
        <td>{%- if members[i][64] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Playlist Titan -->
        <td>{%- if members[i][65] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Glory Hunter -->
        <td>{%- if members[i][66] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Glory Warlock -->
        <td>{%- if members[i][67] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Crucible Glory Titan -->
        <td>{%- if members[i][68] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 3 Hunter -->
        <td>{%- if members[i][69] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 3 Warlock -->
        <td>{%- if members[i][70] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 3 Titan -->
        <td>{%- if members[i][71] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 5 Hunter -->
        <td>{%- if members[i][72] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 5 Warlock -->
        <td>{%- if members[i][73] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 5 Titan -->
        <td>{%- if members[i][74] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 7 Hunter -->
        <td>{%- if members[i][75] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 7 Warlock -->
        <td>{%- if members[i][76] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Trials 7 Titan -->
        <td>{%- if members[i][77] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Low Light Hunter -->
        <td>{%- if members[i][78] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Low Light Warlock -->
        <td>{%- if members[i][79] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Low Light Titan -->
        <td>{%- if members[i][80] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Account doesn't exist -->
        <td>{%- if members[i][81] == 'True' -%}✔️{%- else -%}{%- endif -%}</td> <!-- Private account -->
    </tr>
    {%- endfor -%}
    </tbody>
</table>
{% endblock %}
<script>
  $('.score').each(function() {
    var score = parseInt($(this).text());
    if (score < 60) {
      $(this).addClass('guardian');
    } else if (score < 120) {
      $(this).addClass('brave');
    } else if (score < 240) {
      $(this).addClass('heroic');
    } else if (score < 480) {
      $(this).addClass('fabled');
    } else if (score < 720) {
      $(this).addClass('mythic');
    } else if (score < 1440) {
      $(this).addClass('legend');
    } else if (score < 2160) {
      $(this).addClass('ironWolf');
    } else {
      $(this).addClass('ironLord');
    }
});

</script>
<script>
  function addExternalScore() {
  members[i][1] = members[i][1] + members[i][82];
  var table = document.getElementById("table");
  var tr = table.getElementsByTagName();
}

</script>
<script>
$('#copyNames_btn').click( function(e){
    e.preventDefault();
    var m = {{members|tojson}};
    var member_names = "";
    var i;
    for (i = 0; i < m.length; i++) {
        member_names = member_names.concat("@",m[i][0]," ");
    }
    alert(member_names);
});
</script>